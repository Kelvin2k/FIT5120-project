<template>
    <div class="eo-list">
        <div v-for="item in items" :key="item.key" class="eo-item">
            <div class="eo-title">{{ itemTitle(item.key) }}</div>
            <div class="eo-desc">{{ item.text }}</div>
        </div>
    </div>
</template>

<script>
import csvData from '@/data/eatingout.csv?raw';
function parseCSV(csv, lang) {
    const lines = csv.split(/\r?\n/).filter(Boolean);
    const headers = lines[0].split(',');
    const langIdx = headers.findIndex(h => h.trim().toLowerCase() === lang.toLowerCase());
    const keyIdx = headers.indexOf('key');
    const items = [];
    for (let i = 1; i < lines.length; i++) {
        const cols = lines[i].split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);
        items.push({
            key: cols[keyIdx].replace(/"/g, ''),
            text: cols[langIdx].replace(/^"|"$/g, '')
        });
    }
    return items;
}
export default {
    name: 'EatingOutContent',
    props: {
        lang: {
            type: String,
            default: 'en',
        },
    },
    data() {
        return {
            items: [],
        };
    },
    watch: {
        lang: {
            immediate: true,
            handler(newLang) {
                this.items = parseCSV(csvData, newLang);
            },
        },
    },
    methods: {
        itemTitle(key) {
            switch (key) {
                case 'order': return 'Order';
                case 'share': return 'Share Food';
                case 'thank': return 'Say Thank You';
                case 'wait': return 'Wait to be Seated';
                case 'pay': return 'Pay';
                default: return key;
            }
        },
    },
};
</script>

<style scoped>
.eo-list {
    width: 100%;
    padding: 32px 0;
    display: flex;
    flex-direction: column;
    gap: 32px;
}

.eo-item {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    padding: 24px 32px;
}

.eo-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 8px;
    color: #4b4b4b;
}

.eo-desc {
    font-size: 1.05rem;
    color: #222;
}
</style>
